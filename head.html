<link rel="stylesheet" href="/styles.css"/>
<link rel="stylesheet" href="/lightgallery.css">
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
<script src="/scripts.js" defer></script>
<script src="/lightgallery.min.js" defer></script>
<script src="/gallery.js" defer></script>
<script>
  window.gallery = {};
  window.gallery.observer = new MutationObserver(mutations => {
  mutations.forEach(mutation => {
    mutation.addedNodes.forEach(node => {
      if (node.tagName === 'DIV') {
        node.querySelectorAll('img').forEach(($pic) => {
          if (!$pic.src) return;
          $pic.setAttribute('src', `${$pic.getAttribute('src').split('?')[0]}??width=374&format=webply&optimize=medium`);
          $pic.previousSibling.remove(); // remove source tag
        });
      }
    });
  });
});

window.gallery.observer.observe(document, {
  childList: true,
  subtree: true,
});
</script>